!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("hammerjs")):"function"==typeof define&&define.amd?define(["hammerjs"],e):"object"==typeof exports?exports.WS=e(require("hammerjs")):t.WS=e(t.Hammer)}("undefined"!=typeof self?self:this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=2)}([function(t,e,n){!function(e,n){t.exports=n()}("undefined"!=typeof self&&self,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=5)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(2),a=n(3),o=function(){function t(t,e){this.id=t,this.intervals=e||[],this._flattened=a.default(this.intervals)}return Object.defineProperty(t.prototype,"flattened",{get:function(){return this._flattened.slice()},enumerable:!0,configurable:!0}),t.prototype.flatten=function(){this._flattened=a.default(this.intervals)},t.prototype.getDuration=function(){return Math.max.apply(Math,this.intervals.map(function(t){return t.end}))},t.prototype.calculate=function(t,e){switch(t.meterType){case"peak":return r.default(t,this.flattened,e);default:return i.default(t,this.flattened,e)}},t}();e.default=o},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r=Math.ceil(t.samplesPerPixel/t.resolution),i=t.scrollPosition*t.samplesPerPixel,a=i/t.samplerate,o=t.samplesPerPixel/t.samplerate,s=a+t.width*o,l=new Float32Array(4*t.width),u=e.findIndex(function(t){return t.end>a&&t.start+t.offsetStart<s});if(-1===u)return l;for(var c=e.length-1,f=e[u],p=n.get(f.source),d=0;d<t.width;d++){var v=a+d*o;if(v>=f.end){if(u===c)return l;f=e[++u],p=n.get(f.source)}if(!(f.start+f.offsetStart>v)){var h=v-o<f.start+f.offsetStart,g=v+o>f.end,m=h||g?1:0;if(null!=p){for(var P=v-f.start,y=Math.floor(P*t.samplerate),S=y+t.samplesPerPixel,_=p.length,b=_<S?_:S,O=0,x=0,M=y;M<b;M+=r){var E=p[M];E>x?x=E:E<O&&(O=E)}l.set([O,x,m,1],4*d)}else l.set([0,0,m,1],4*d)}}return l}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r=Math.ceil(t.samplesPerPixel/t.resolution),i=t.scrollPosition*t.samplesPerPixel,a=i/t.samplerate,o=t.samplesPerPixel/t.samplerate,s=a+t.width*o,l=new Float32Array(4*t.width),u=e.findIndex(function(t){return t.end>a&&t.start+t.offsetStart<s});if(-1===u)return l;for(var c=e.length-1,f=e[u],p=n.get(f.source),d=0;d<t.width;d++){var v=a+d*o;if(v>=f.end){if(u===c)return l;f=e[++u],p=n.get(f.source)}if(!(f.start+f.offsetStart>v)){var h=v-o<f.start+f.offsetStart,g=v+o>f.end,m=h||g?1:0;if(null!=p){for(var P=v-f.start,y=Math.floor(P*t.samplerate),S=y+t.samplesPerPixel,_=p.length,b=_<S?_:S,O=0,x=0,M=0,E=y;E<b;E+=r,M++){var w=p[E];w>0?O+=w*w:x+=w*w}var j=-Math.sqrt(x/M),T=Math.sqrt(O/M);l.set([j,T,m,1],4*d)}else l.set([0,0,m,1],4*d)}}return l}},function(t,e){var n=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t.start+t.offsetStart};e.default=function(t){if(null==t||0===t.length)return[];var e=o(t),n=a(e),r=i(n),u=s(r);return l(u)};var i=function(t){return t.map(function(t){return n({},t)})},a=function(t){var e=0,n=Number.MIN_SAFE_INTEGER;return t.forEach(function(t){t.index>n?(n=t.index,t.index=++e):t.index=e}),t},o=function(t){return t.sort(function(t,e){return f(t.index,e.index)||f(r(t),r(e))})},s=function(t){return t.reduce(function(t,e){return(t[e.index]=t[e.index]||[]).push(e),t},{})},l=function(t){for(var e=null,n=0,r=Object.keys(t);n<r.length;n++){var i=r[n],a=u(t[i]);e=null==e?a:c(a,e)}return e},u=function(t){if(t.length<=1)return t;for(var e=[],i=t[0],a=1;a<t.length;a++){var o=t[a];i.end>=o.end||(r(o)<i.end?(e.push(n({},i,{end:r(o)})),i=o):(e.push(i),i=o))}return e.push(i),e},c=function(t,e){for(var i=0,a=0,o=[];i<t.length||a<e.length;){var s=t[i],l=e[a];i===t.length?(o.push(n({},l)),a++):a===e.length?(o.push(n({},s)),i++):r(s)<=r(l)?(s.end<=r(l)||(s.end<l.end?l.offsetStart=s.end-l.start:a++),o.push(n({},s)),i++):l.end<=r(s)?(o.push(n({},l)),a++):s.end>l.end?(o.push(n({},l,{end:r(s)})),a++):(o.push(n({},l,{end:r(s)})),l.offsetStart=s.end-l.start)}return o},f=function(t,e){return t>e?1:t<e?-1:0}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={scrollPosition:0,samplesPerPixel:1024,resolution:10,meterType:"rms",width:300,samplerate:44100};e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(6);e.WaveShaper=r.default;var i=n(0);e.Track=i.default;var a=n(4);e.defaultConfig=a.default;var o=n(2);e.rms=o.default;var s=n(1);e.peak=s.default;var l=n(3);e.flatten=l.default},function(t,e,n){var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(4),o=function(){function t(t){void 0===t&&(t=a.default),this.tracks=new Map,this.audioData=new Map,this.callbackMap=new Map,this._activeWaveShapers=[],this.validateOptions(t),this._options=r({},a.default,t)}return Object.defineProperty(t.prototype,"options",{get:function(){return r({},this._options)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeWaveShapers",{get:function(){return this._activeWaveShapers.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastProcessResult",{get:function(){return this._lastProcessResult},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),t.prototype.timeToPosition=function(t){return t*this._options.samplerate/this._options.samplesPerPixel},t.prototype.positionToTime=function(t){return t*this._options.samplesPerPixel/this._options.samplerate},t.prototype.flatten=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.getProcessIds.apply(this,e).forEach(function(e){var n=t.getTrack(e);null!=n&&n.flatten()}),this},t.prototype.process=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this.getProcessIds.apply(this,t),i=r({},this.options),a=[],o=0;o<n.length;o++){var s=n[o],l=this.getTrack(s);if(null!=l){var u=l.calculate(i,this.audioData);a.push({id:s,data:u})}}return this._lastProcessResult={options:i,data:a},this.invokeCallbacks(this._lastProcessResult),this},t.prototype.on=function(t,e){var n=this.callbackMap.get(t);return null==n?this.callbackMap.set(t,[e]):n.push(e),this},t.prototype.off=function(t,e){var n=this.callbackMap.get(t);if(null==n)return this;var r=n.indexOf(e);return r<0?this:(n=n.splice(r,1),this)},t.prototype.setOptions=function(t){return this.validateOptions(t),this._options=r({},this.options,t),this.invokeOptionsCallbacks(this.options),this},t.prototype.setTracks=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;n++){var r=t[n],a=this.getTrack(r.id);if(null==a){var o=new i.default(r.id,r.intervals);this.tracks.set(r.id,o)}else a.intervals=r.intervals||[],a.flatten()}return this._duration=this.getDuration(),this},t.prototype.setData=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach(function(e){t.audioData.set(e.id,e.data)}),this},t.prototype.setActive=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._activeWaveShapers=t,this},t.prototype.clearTracks=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach(function(e){t.removeCallbacksById(e),t.tracks.delete(e)}),this},t.prototype.getTrack=function(t){return this.tracks.get(t)},t.prototype.validateOptions=function(t){var e=this._options||a.default;(!t.samplesPerPixel||t.samplesPerPixel<=0)&&(t.samplesPerPixel=e.samplesPerPixel),t.meterType||(t.meterType=e.meterType),(!t.resolution||t.resolution<=0)&&(t.resolution=e.resolution),(!t.width||this.options.width<=0)&&(t.width=e.width),(!t.scrollPosition||this.options.scrollPosition<=0)&&(t.scrollPosition=e.scrollPosition),(!t.samplerate||this.options.samplerate<=0)&&(t.samplerate=e.samplerate)},t.prototype.invokeCallbacks=function(t){for(var e=0;e<t.data.length;e++){var n=t.data[e],r=this.callbackMap.get(n.id);if(null!=r)for(var i=0;i<r.length;i++){var a=r[i];a(t.options,new Float32Array(n.data))}}},t.prototype.invokeOptionsCallbacks=function(t){var e=this.callbackMap.get("options");null!=e&&e.forEach(function(e){return e(t,null)})},t.prototype.getProcessIds=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length>0?t:this._activeWaveShapers.length>0?this._activeWaveShapers:Array.from(this.tracks.keys())},t.prototype.removeCallbacksById=function(t){var e=this.callbackMap.get(t);null!=e&&(e.splice(0,e.length),this.callbackMap.delete(t))},t.prototype.getDuration=function(){return Array.from(this.tracks.values()).reduce(function(t,e){var n=e.getDuration();return n>t?n:t},0)},t}();e.default=o}])})},function(e,n){e.exports=t},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);e.DomRenderWaveShaper=r.default,e.default=new r.default},function(t,e,n){var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),o=n(1),s=n(4),l=n(5),u=n(6),c=n(7),f=n(8),p=n(9),d=n(10),v=n(11),h=n(12),g=n(13),m=function(t){function e(e){void 0===e&&(e=h.default);var n=t.call(this,e)||this;return n.unregister=function(){},n.unregisterMap=new Map,n.canvasMap=new Map,n._options=i({},h.default,n._options),n}return r(e,t),Object.defineProperty(e.prototype,"scrollWidth",{get:function(){return this._duration*this._options.samplerate/this._options.samplesPerPixel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return i({},this._options)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hammer",{get:function(){return this._hammer},enumerable:!0,configurable:!0}),e.prototype.setOptions=function(t){return this._options=i({},this._options,t),this.invokeOptionsCallbacks(this.options),this},e.prototype.registerCanvas=function(t,e,n){var r=this,i=e.getContext("2d");if(null==i)throw Error("Cannot get context from canvas.");e.classList.add("waveshaper"),e.setAttribute("data-wave-id",t),e.style.width=this.options.width+"px",e.style.height=this.options.height+"px";var a=(devicePixelRatio||1)<1?1:devicePixelRatio||1;e.width=this.options.width*a,e.height=this.options.height,i.scale(a,1);var o=function(t,e){return d.default(e,t,i,n)};this.on(t,o),this.unregisterCanvas(t),this.canvasMap.set(t,function(){return r.off(t,o)});var s=v.default(this,e,g.dragState);return this.unregisterMap.set(t,s),this._options.registerSetsActive&&this.setActive.apply(this,this.activeWaveShapers.concat(t)),this},e.prototype.unregisterCanvas=function(t){var e=this.canvasMap.get(t);null!=e&&(e(),this.canvasMap.delete(t));var n=this.unregisterMap.get(t);if(null!=n&&(n(),this.unregisterMap.delete(t)),this._options.registerSetsActive){var r=this.activeWaveShapers.indexOf(t);-1!=r&&this.setActive.apply(this,this.activeWaveShapers.splice(r,1))}return this},e.prototype.loadData=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return n.forEach(function(n){fetch(n.url).then(function(t){return t.arrayBuffer()}).then(function(e){return t.decodeAudioData(e)}).then(function(t){e.setData({id:n.id,data:t.getChannelData(0)}).process()}).catch(function(t){return console.log(t)})}),this},e.prototype.setInteraction=function(t){if(null==t)throw Error("Interaction container element could not be found.");this.unregister(),t.setAttribute("touch-action","none");var e=new o(t,s.default);return this._hammer=e,u.default(this,e,g.dragState),l.default(this,e),c.default(this,e),f.default(this,e),p.default(this,e),this.unregister=function(){e.destroy()},this},e.prototype.clearInteraction=function(){this.unregister(),this.unregister=function(){},this._hammer=null},e}(a.WaveShaper);e.default=m},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i={touchAction:"pan-y",recognizers:[[r.Pan,{direction:r.DIRECTION_HORIZONTAL}],[r.Pinch,{enable:!0}],[r.Tap]]};e.default=i},function(t,e){var n=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var r=function(t,e){return"cut"===e.mode&&t.hasAttribute("data-wave-id")};e.on("tap",function(e){var i=t.options,a=t.options.getEventTarget(e.srcEvent);if(null!=i&&r(a,i)){var o=a.getAttribute("data-wave-id"),s=t.getTrack(o);if(null!=s){var l=a.getBoundingClientRect(),u=(i.scrollPosition+(e.center.x-l.left))*(i.samplesPerPixel/i.samplerate),c=s.flattened.find(function(t){return t.start+t.offsetStart<=u&&t.end>=u});if(null!=c){var f=s.intervals.find(function(t){return t.id===c.id});if(null!=f){var p=n({},f,{offsetStart:u-f.start,id:i.generateId()});f.end=u,s.intervals.push(p),t.flatten(s.id),t.process(s.id)}}}}})}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r=function(t,e){return"drag"===e.mode&&t.hasAttribute("data-wave-id")};e.on("panstart",function(e){var i=t.options,a=t.options.getEventTarget(e.srcEvent);if(r(a,i)){var o=a.getAttribute("data-wave-id"),s=t.getTrack(o);if(null!=s){var l=a.getBoundingClientRect(),u=(i.scrollPosition+(e.center.x-l.left))*(i.samplesPerPixel/i.samplerate),c=s.flattened.find(function(t){return t.start+t.offsetStart<=u&&t.end>=u});if(null!=c){var f=s.intervals.find(function(t){return t.id===c.id});null!=f&&(e.srcEvent instanceof PointerEvent&&a.setPointerCapture(e.srcEvent.pointerId),n.options=i,n.activeSegment=f,n.activeSegmentStart=n.activeSegment.start,n.duration=f.end-f.start,n.activeSegment.index=1e3,n.dragWave=s)}}}}),e.on("panmove",function(e){var i=t.options.getEventTarget(e.srcEvent);if(null!=n.options&&null!=n.activeSegment&&null!=n.dragWave&&!n.dragging&&r(i,n.options)){n.dragging=!0;var a=e.deltaX*n.options.samplesPerPixel/n.options.samplerate,o=n.activeSegmentStart+a;o+n.activeSegment.offsetStart<0&&(o=-n.activeSegment.offsetStart),n.activeSegment.start=o,n.activeSegment.end=o+n.duration,t.flatten(n.dragWave.id),t.process(n.dragWave.id),n.dragging=!1}}),e.on("panend",function(e){var i=t.options.getEventTarget(e.srcEvent);null!=n.options&&r(i,n.options)&&(n.activeSegment=null,n.activeSegmentStart=0,n.dragWave=null,n.options=null,n.duration=0)})}},function(t,e){function n(t,e){var n=function(t,e){return"pan"===e.mode&&t.hasAttribute("data-wave-id")};e.on("panstart",function(e){var a=t.options,o=t.options.getEventTarget(e.srcEvent);n(o,a)&&(e.srcEvent instanceof PointerEvent&&o.setPointerCapture(e.srcEvent.pointerId),i.panMax=t.scrollWidth+r,i.panStart=a.scrollPosition)}),e.on("panmove",function(e){i.options=t.options;var r=t.options.getEventTarget(e.srcEvent);if(n(r,i.options)){var a=i.panStart-e.deltaX,o=a>0?a:0;o!==i.options.scrollPosition&&(o>i.panMax-i.options.width||t.setOptions({scrollPosition:o}).process())}}),e.on("panend",function(e){var r=t.options.getEventTarget(e.srcEvent);null!=i.options&&n(r,i.options)&&(i.options=null,i.panStart=0,i.panMax=0)})}Object.defineProperty(e,"__esModule",{value:!0});var r=500,i={panStart:0,panMax:0,options:null};e.default=n},function(t,e){function n(t,e){var n=function(t,e){return"pan"===e.mode&&t.hasAttribute("data-wave-id")};e.on("pinchstart",function(e){var a=t.options,o=t.options.getEventTarget(e.srcEvent);n(o,a)&&(e.srcEvent instanceof PointerEvent&&o.setPointerCapture(e.srcEvent.pointerId),i.sppStart=a.samplesPerPixel,i.maxWidth=t.scrollWidth+r)}),e.on("pinchmove",function(e){i.options=t.options;var a=t.options.getEventTarget(e.srcEvent);if(null!=i.options&&n(a,i.options)&&null!=e.scale&&!(e.scale<=0)){var o=i.options.scrollPosition*i.options.samplesPerPixel,s=i.options.width*i.options.samplesPerPixel,l=s/2,u=i.sppStart*e.scale;if(0!=u){var c=i.options.width*u,f=c/2;if(!(c>=(t.scrollWidth+r)*i.options.samplerate)){var p=(o+l-f)/u;t.setOptions({samplesPerPixel:u,scrollPosition:p>=0?p:0}).process()}}}}),e.on("pinchend",function(e){var r=t.options.getEventTarget(e.srcEvent);null!=i.options&&n(r,i.options)&&(i.sppStart=0,i.maxWidth=0,i.options=null)})}Object.defineProperty(e,"__esModule",{value:!0});var r=500,i={maxWidth:0,sppStart:0,options:null};e.default=n},function(t,e){function n(t,e){var n=function(t,e){return"resize"===e.mode&&null!=t&&t.hasAttribute("data-wave-id")};e.on("panstart",function(e){var i=t.options,a=t.options.getEventTarget(e.srcEvent);if(n(a,i)){var o=a.getAttribute("data-wave-id"),s=t.getTrack(o);if(null!=s){var l=a.getBoundingClientRect(),u=(i.scrollPosition+(e.center.x-l.left))*i.samplesPerPixel/i.samplerate,c=s.flattened.find(function(t){return t.start+t.offsetStart<=u&&t.end>=u});if(null!=c){r.activeSegmentSide=u<c.start+c.offsetStart+(c.end-(c.start+c.offsetStart))/2?"left":"right";var f=s.intervals.find(function(t){return t.id===c.id});null!=f&&(e.srcEvent instanceof PointerEvent&&a.setPointerCapture(e.srcEvent.pointerId),r.options=i,r.activeSegment=f,r.activeSegmentOffsetStart=f.offsetStart,r.activeSegmentOffsetEnd=f.end,f.index=1e3,r.dragWave=s)}}}}),e.on("panmove",function(e){var i=t.options.getEventTarget(e.srcEvent);if(null!=r.dragWave&&null!=r.activeSegment&&null!=r.options&&n(i,r.options)){var a=t.options,o=e.deltaX*a.samplesPerPixel/a.samplerate,s="left"===r.activeSegmentSide?r.activeSegmentOffsetStart+o:r.activeSegmentOffsetEnd+o;s<0&&(s=0);var l=r.activeSegment;("left"===r.activeSegmentSide?l.end-l.start-s:s-l.start-l.offsetStart)<=2||("left"===r.activeSegmentSide?l.offsetStart=s:l.end=s,t.flatten(r.dragWave.id),t.process(r.dragWave.id))}}),e.on("panend",function(e){var i=t.options.getEventTarget(e.srcEvent);null!=r.options&&n(i,r.options)&&(r.activeSegment=null,r.activeSegmentOffsetStart=0,r.activeSegmentOffsetEnd=0,r.activeSegmentSide=null,r.dragWave=null,r.options=null)})}Object.defineProperty(e,"__esModule",{value:!0});var r={activeSegment:null,activeSegmentSide:null,activeSegmentOffsetStart:0,activeSegmentOffsetEnd:0,dragWave:null,options:null};e.default=n},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r){var i=e.height/2,a=e.width;n.fillStyle=r,n.clearRect(0,0,a,e.height);for(var o=0,s=!1,l=0;o<a;o++){var u=4*o,c=1===t[u+3];!s&&c?(s=!0,l=o):!s||c&&o!==a-1||(s=!1,n.fillRect(l,0,o-l,e.height))}n.fillStyle="black",n.beginPath(),n.moveTo(0,i);for(var o=0;o<a;o++){var u=4*o;n.lineTo(o,Math.round(t[u]*i+i))}n.lineTo(a-1,i),n.moveTo(0,i);for(var o=0;o<a;o++){var u=4*o;n.lineTo(o,Math.round(t[u+1]*i+i))}n.lineTo(a-1,i),n.closePath();for(var o=0;o<a;o++){var u=4*o;0===t[u-4+2]&&1===t[u+2]&&n.rect(o,0,1,e.height)}n.fill()}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r=function(t){return i(t)};e.addEventListener("pointermove",r);var i=function(e){if(null!=n.options&&"drag"===n.options.mode&&null!=n.activeSegment&&null!=n.dragWave){var r=document.elementFromPoint(e.clientX,e.clientY);if(null!=r&&r instanceof HTMLCanvasElement){var i=r.getAttribute("data-wave-id");if(null!=i){var a=t.getTrack(i);if(null!=a&&n.dragWave.id!==i){var o=n.dragWave.intervals.indexOf(n.activeSegment);n.dragWave.intervals.splice(o,1),a.intervals.push(n.activeSegment),n.activeSegment.index=1e3;var s=n.dragWave.id;n.dragWave=a,t.flatten(a.id,s),t.process(a.id,s)}}}}};return function(){e.removeEventListener("pointermove",r)}}},function(t,e,n){var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=r({},i.defaultConfig,{mode:"pan",height:150,getEventTarget:function(t){return t.target},generateId:function(){return Math.random().toString()},registerSetsActive:!0});e.default=a},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.dragState={activeSegment:null,activeSegmentStart:0,dragWave:null,options:null,duration:0,dragging:!1}}]).default});
//# sourceMappingURL=waveshaper-dom.min.js.map